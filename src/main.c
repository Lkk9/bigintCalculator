#include "bigint.h"
#include "notation.h"
#include "returncode.h"
#include "stack.h"
#include <stdio.h>
#include <string.h>
#include <time.h>

int main(int argc, char **argv) {
    if (argc != 2) {
        fprintf(stderr, "Requires one argument, instead got %d\n", argc - 1);
        return RC_INV_ARG;
    }

    notation_t notation;
    if (strcmp(argv[1], "--revpol") == 0) {
        notation = REVPOL;
    } else if (strcmp(argv[1], "--infix") == 0) {
        notation = INFIX;
    } else {
        fprintf(stderr, "Invalid argument name \"%s\"\n", argv[1]);
        return RC_INV_ARG;
    }
    ll_mexp_t *stack = NULL;
    bi_t *a, *b, *c;

    bi_init_from_str(&a, "1");
    clock_t begin = clock();
    bi_init_from_str(&b,
                     "75586883606316828894780396523038328636698375223897030509206686168422574303929808204006341053916724146710443377116709091866532457247558760954391244056112763299889113232100141643260880180720814537270373199023160027044527473417140491543379091954207828207593471792086453850274041971807256752841256640416478700004935523519348185021645568557398418372930259154393951819645086411925980614215370070058555241348667226642110775110741092395716996207037830159204623236638324176470849979642123110376537763977846485734225750910572131221371665400225873060169855960531858858600714956172831505593349648797383472827466560929765976703396244035532042070166227863091448061514803299872321849797015708499338346477868415221589318923308706593528041468206208419683825838782125300310465001442108712116932536281514232978609919518548023599450941565388324231163245814140691473269735352616404106675662608539530788728306827116111186344833721131156599514440582982980658386842679675586883606316828894780396527558"
                     "68836063168288947803965230383286366983752238970305092066861684225743039298082040063410539167241467104433771167090918665324572475587609543912440561127632998891132321001416432608801807208145372703731990231600270445274734171404915433790919542078282075934717920864538502740419718072567528412566404164787000049355235193481850216455685573984183729302591543939518196450864119259806142153700700585552413486672266421107751107410923957169962070378301592046232366383241764708499796421231103765377639778464857342257509105721312213716654002258730601698559605318588586007149561728315055933496487973834728274665609297659767033962440355320420701662278630914480615148032998723218497970157084993383464778684152215893189233087065935280414682062084196838258387821253003104650014421087121169325362815142329786099195185480235994509415653883242311632458141406914732697353526164041066756626085395307887283068271161111863448337211311565995144405829829806583868426796755868836063168288947803965268836063"
                     "16828894780396523038328636698375223897030509206686168422574303929808204006341053916724146710443377116709091866532457247558760954391244056112763299889113232100141643260880180720814537270373199023160027044527473417140491543379091954207828207593471792086453850274041971807256752841256640416478700004935523519348185021645568557398418372930259154393951819645086411925980614215370070058555241348667226642110775110741092395716996207037830159204623236638324176470849979642123110376537763977846485734225750910572131221371665400225873060169855960531858858600714956172831505593349648797383472827466560929765976703396244035532042070166227863091448061514803299872321849797015708499338346477868415221589318923308706593528041468206208419683825838782125300310465001442108712116932536281514232978609919518548023599450941565388324231163245814140691473269735352616404106675662608539530788728306827116111186344833721131156599514440582982980658386842679675586883606316828894780396526883606316828894"
                     "78039652303832863669837522389703050920668616842257430392980820400634105391672414671044337711670909186653245724755876095439124405611276329988911323210014164326088018072081453727037319902316002704452747341714049154337909195420782820759347179208645385027404197180725675284125664041647870000493552351934818502164556855739841837293025915439395181964508641192598061421537007005855524134866722664211077511074109239571699620703783015920462323663832417647084997964212311037653776397784648573422575091057213122137166540022587306016985596053185885860071495617283150559334964879738347282746656092976597670339624403553204207016622786309144806151480329987232184979701570849933834647786841522158931892330870659352804146820620841968382583878212530031046500144210871211693253628151423297860991951854802359945094156538832423116324581414069147326973535261640410667566260853953078872830682711611118634483372113115659951444058298298065838684267967558688360631682889478039652755868836063168288947803"
                     "96523038328636698375223897030509206686168422574303929808204006341053916724146710443377116709091866532457247558760954391244056112763299889113232100141643260880180720814537270373199023160027044527473417140491543379091954207828207593471792086453850274041971807256752841256640416478700004935523519348185021645568557398418372930259154393951819645086411925980614215370070058555241348667226642110775110741092395716996207037830159204623236638324176470849979642123110376537763977846485734225750910572131221371665400225873060169855960531858858600714956172831505593349648797383472827466560929765976703396244035532042070166227863091448061514803299872321849797015708499338346477868415221589318923308706593528041468206208419683825838782125300310465001442108712116932536281514232978609919518548023599450941565388324231163245814140691473269735352616404106675662608539530788728306827116111186344833721131156599514440582982980658386842679675586883606316828894780396527558"
                     "68836063168288947803965230383286366983752238970305092066861684225743039298082040063410539167241467104433771167090918665324572475587609543912440561127632998891132321001416432608801807208145372703731990231600270445274734171404915433790919542078282075934717920864538502740419718072567528412566404164787000049355235193481850216455685573984183729302591543939518196450864119259806142153700700585552413486672266421107751107410923957169962070378301592046232366383241764708499796421231103765377639778464857342257509105721312213716654002258730601698559605318588586007149561728315055933496487973834728274665609297659767033962440355320420701662278630914480615148032998723218497970157084993383464778684152215893189233087065935280414682062084196838258387821253003104650014421087121169325362815142329786099195185480235994509415653883242311632458141406914732697353526164041066756626085395307887283068271161111863448337211311565995144405829829806583868426796755868836063168288947803965268836063"
                     "16828894780396523038328636698375223897030509206686168422574303929808204006341053916724146710443377116709091866532457247558760954391244056112763299889113232100141643260880180720814537270373199023160027044527473417140491543379091954207828207593471792086453850274041971807256752841256640416478700004935523519348185021645568557398418372930259154393951819645086411925980614215370070058555241348667226642110775110741092395716996207037830159204623236638324176470849979642123110376537763977846485734225750910572131221371665400225873060169855960531858858600714956172831505593349648797383472827466560929765976703396244035532042070166227863091448061514803299872321849797015708499338346477868415221589318923308706593528041468206208419683825838782125300310465001442108712116932536281514232978609919518548023599450941565388324231163245814140691473269735352616404106675662608539530788728306827116111186344833721131156599514440582982980658386842679675586883606316828894780396526883606316828894"
                     "78039652303832863669837522389703050920668616842257430392980820400634105391672414671044337711670909186653245724755876095439124405611276329988911323210014164326088018072081453727037319902316002704452747341714049154337909195420782820759347179208645385027404197180725675284125664041647870000493552351934818502164556855739841837293025915439395181964508641192598061421537007005855524134866722664211077511074109239571699620703783015920462323663832417647084997964212311037653776397784648573422575091057213122137166540022587306016985596053185885860071495617283150559334964879738347282746656092976597670339624403553204207016622786309144806151480329987232184979701570849933834647786841522158931892330870659352804146820620841968382583878212530031046500144210871211693253628151423297860991951854802359945094156538832423116324581414069147326973535261640410667566260853953078872830682711611118634483372113115659951444058298298065838684267967558688360631682889478039652");
    clock_t end = clock();

    bi_init(&c);

    ll_bi_show(a);
    ll_bi_show(b);

    bi_mul(&c, a, b);

    ll_bi_show(c);

    printf("\n\ntime: %lf\n", (double)(end - begin) / CLOCKS_PER_SEC);
    if (ll_mexp_push(stack, 23) == NULL) {
        return RC_ERR;
    }
    bi_free(&a);
    bi_free(&b);
    bi_free(&c);

    return RC_OK;
}